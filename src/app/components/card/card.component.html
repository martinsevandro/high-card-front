<div
  class="player-card carta w-[308px] h-[560px] relative perspective flip-card"
  [class.flip-enabled]="enableEffects"
  (click)="toggleFlip($event)"
  #cardRoot
>
  <div
    class="flip-inner relative w-full h-full transition-transform duration-500 ease-linear"
    [ngStyle]="{
      transform: flipped
        ? rotationDirection === 'right'
          ? 'rotateY(180deg)'
          : 'rotateY(-180deg)'
        : 'rotateY(0deg)'
    }"
  >
    <!-- Frente -->
    <div
      class="flip-front relative w-full h-full rounded-none overflow-hidden shadow-lg border-4"
      [ngStyle]="{ border: '4px solid ' + card.corDaBorda }"
    >
      <img
        [src]="card.splashArt"
        class="absolute w-full h-full object-cover"
        alt="card-champion"
      />

      <div class="absolute bottom-0 w-full text-white p-4 space-y-2">
        <div class="flex justify-center">
          <h2
            class="text-center text-blur"
            style="
              font-family: 'Herr Von Muellerhoff', cursive;
              color: white;
              -webkit-text-stroke: 0.5px gold;
              text-shadow: 0 0 9px black;
              font-size: clamp(2.5rem, 5vw, 3.4rem);
            "
          >
            {{ card.riotIdGameName }}
          </h2>
        </div>

        <!-- Conteúdo -->
        <!-- Estatísticas -->
        <div [innerHTML]="sanitizedFirstLine" class="card-stats-text"></div>
        <div [innerHTML]="sanitizedSecondLine" class="card-stats-text"></div>

        <div
          class="flex w-full text-sm font-medium px-1 gap-1 card-stats-text leading-[1.8rem] min-h-[2.4rem] overflow-visible"
        >
          <div
            *ngFor="let stat of sanitizedThirdLine; let i = index"
            [ngClass]="{
              'items-start': i === 0,
              'items-center': i === 1,
              'items-end': i === 2
            }"
            class="w-1/3 flex flex-col text-white px-1 rounded"
          >
            <div class="truncate max-w-full">{{ stat[0] }}</div>
            <div class="truncate max-w-full">{{ stat[1] }}</div>
          </div>
        </div>

        <!-- Runas -->
        <div [innerHTML]="sanitizedRunas"></div>

        <!-- Itens e Spells -->
        <div class="flex justify-between items-center mt-2">
          <div [innerHTML]="sanitizedItems"></div>
          <div [innerHTML]="sanitizedSpells"></div>
        </div>

        <!-- Achievements e data -->
        <div class="flex justify-between items-center">
          <div
            [innerHTML]="sanitizedAchievements"
            class="flex gap-1 items-center w-6 h-6"
          ></div>

          <div class="mt-2 flex">
            <p class="text-sm inline-flex px-2 py-1 rounded card-stats-text">
              {{ card.gameDate }}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Verso -->
    <div
      class="flip-back absolute w-full h-full backface-hidden transform rotate-y-180 rounded-none overflow-hidden shadow-lg border-4"
      [ngStyle]="{
        border: '4px solid transparent',
        'border-image': card.corDoVerso + ' 1',
        background: card.corDoVerso
      }"
    >
      <div
        class="flex justify-center items-center h-full"
        style="
          background-image: url('assets/img/lol-icone-back.png');
          background-size: 70%;
          background-repeat: no-repeat;
          background-position: center;
        "
      ></div>
    </div>
  </div>
</div>
